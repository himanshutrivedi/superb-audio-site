<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Manage Products - Superb Audio</title>
  <style>
    body { background-color: #111; color: #eee; font-family: Arial; padding: 2rem; }
    input, button, textarea { padding: 0.5rem; margin: 0.5rem 0; width: 100%; max-width: 400px; display: block; }
    .hidden { display: none; }
    .product { margin: 1rem 0; border-bottom: 1px solid #444; padding-bottom: 1rem; }
    img { max-width: 200px; display: block; margin-top: 1rem; }
  </style>
</head>
<body>
  <h1>Product Manager (Login Required)</h1>

  <div id="login-form">
    <input type="email" id="email" placeholder="Your Email" />
    <input type="password" id="password" placeholder="Password" />
    <button onclick="login()">Login</button>
    <p id="login-status"></p>
  </div>

  <div id="admin-panel" class="hidden">
    <h2>Add Product</h2>
    <input id="name" placeholder="Product Name" />
    <textarea id="description" placeholder="Product Description"></textarea>
    <input id="imageUrl" placeholder="Image URL (paste from imgbb or similar)" />
    <button onclick="addProduct()">Add Product</button>

    <h2>Products</h2>
    <div id="products"></div>
  </div>

  <script src="https://www.gstatic.com/firebasejs/10.10.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.10.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.10.0/firebase-firestore-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyDjkl_nnwPtKPJEWNCbx6DV350GXnjwtIw",
      authDomain: "superb-audio.firebaseapp.com",
      projectId: "superb-audio",
      storageBucket: "superb-audio.appspot.com",
      messagingSenderId: "766128832541",
      appId: "1:766128832541:web:fe4357c6e0886233fb06f4",
      measurementId: "G-BJFLER2FNK"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    function login() {
      const email = document.getElementById("email").value;
      const pass = document.getElementById("password").value;
      auth.signInWithEmailAndPassword(email, pass)
        .then(() => {
          document.getElementById("login-form").classList.add("hidden");
          document.getElementById("admin-panel").classList.remove("hidden");
          loadProducts();
        })
        .catch(err => {
          document.getElementById("login-status").innerText = err.message;
        });
    }

    function addProduct() {
      const name = document.getElementById("name").value;
      const description = document.getElementById("description").value;
      const image = document.getElementById("imageUrl").value;

      if (!image.startsWith("http")) {
        alert("Please enter a valid image URL.");
        return;
      }

      db.collection("products").add({ name, description, image }).then(loadProducts);
    }

    function loadProducts() {
      const container = document.getElementById("products");
      container.innerHTML = "";
      db.collection("products").get().then(snapshot => {
        snapshot.forEach(doc => {
          const data = doc.data();
          const div = document.createElement("div");
          div.className = "product";
          div.innerHTML = `
            <strong>${data.name}</strong>
            <p>${data.description}</p>
            <img src="${data.image}" />
            <button onclick="deleteProduct('${doc.id}')">Delete</button>
          `;
          container.appendChild(div);
        });
      });
    }

    function deleteProduct(id) {
      db.collection("products").doc(id).delete().then(loadProducts);
    }
  </script>
</body>
</html>