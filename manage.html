<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Manage Products - Superb Audio Solutions</title>
  <style>
    body {
      background-color: #111;
      color: #eee;
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 0;
    }

    header {
      background: #1a1a1a;
      padding: 1rem 2rem;
      font-size: 1.2rem;
      border-bottom: 1px solid #333;
    }

    .container {
      max-width: 800px;
      margin: 2rem auto;
      padding: 2rem;
      background: #1c1c1c;
      border-radius: 16px;
      box-shadow: 0 0 10px rgba(255,255,255,0.05);
    }

    h2 {
      margin-top: 0;
      font-size: 1.5rem;
      border-bottom: 1px solid #333;
      padding-bottom: 0.5rem;
    }

    input, textarea {
      display: block;
      width: 100%;
      margin-bottom: 1rem;
      padding: 0.5rem;
      background: #222;
      color: #fff;
      border: 1px solid #333;
      border-radius: 6px;
    }

    button {
      background: #444;
      color: #fff;
      padding: 0.5rem 1rem;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      margin-right: 10px;
    }

    button:hover {
      background: #666;
    }

    .product-list {
      margin-top: 2rem;
    }

    .product-item {
      background: #2a2a2a;
      padding: 1rem;
      border-radius: 10px;
      margin-bottom: 1rem;
    }

    .product-item img {
      width: 100px;
      border-radius: 6px;
    }
  </style>
</head>
<body>

<header>
  ðŸ“¦ Manage Products - Superb Audio Solutions
</header>

<div class="container">
  <h2>Add / Update Product</h2>
  <input type="text" id="productId" placeholder="Leave empty to add new">
  <input type="text" id="productName" placeholder="Product Name">
  <textarea id="productDescription" placeholder="Product Description"></textarea>
  <input type="text" id="productImage" placeholder="Image URL">
  <button onclick="addOrUpdateProduct()">Save</button>
  <button onclick="resetForm()">Clear</button>

  <div class="product-list" id="productList">
    <!-- List of products here -->
  </div>
</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.11/firebase-app.js";
  import {
    getFirestore, collection, addDoc, getDocs, deleteDoc, updateDoc, doc
  } from "https://www.gstatic.com/firebasejs/9.6.11/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDjkl_nnwPtKPJEWNCbx6DV350GXnjwtIw",
    authDomain: "superb-audio.firebaseapp.com",
    projectId: "superb-audio",
    storageBucket: "superb-audio.firebasestorage.app",
    messagingSenderId: "766128832541",
    appId: "1:766128832541:web:fe4357c6e0886233fb06f4",
    measurementId: "G-BJFLER2FNK"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
  const productsCol = collection(db, "products");

  async function loadProducts() {
    const snapshot = await getDocs(productsCol);
    const productList = document.getElementById("productList");
    productList.innerHTML = "";
    snapshot.forEach((docSnap) => {
      const data = docSnap.data();
      const div = document.createElement("div");
      div.className = "product-item";
      div.innerHTML = `
        <h4>${data.name}</h4>
        <img src="${data.image}" alt="${data.name}">
        <p>${data.description}</p>
        <button onclick="editProduct('${docSnap.id}', \`${data.name}\`, \`${data.description}\`, \`${data.image}\`)">Edit</button>
        <button onclick="deleteProduct('${docSnap.id}')">Delete</button>
      `;
      productList.appendChild(div);
    });
  }

  async function addOrUpdateProduct() {
    const id = document.getElementById("productId").value.trim();
    const name = document.getElementById("productName").value;
    const description = document.getElementById("productDescription").value;
    const image = document.getElementById("productImage").value;

    if (!name || !description || !image) return alert("Fill all fields");

    if (id) {
      const docRef = doc(db, "products", id);
      await updateDoc(docRef, { name, description, image });
    } else {
      await addDoc(productsCol, { name, description, image });
    }

    resetForm();
    loadProducts();
  }

  function resetForm() {
    document.getElementById("productId").value = "";
    document.getElementById("productName").value = "";
    document.getElementById("productDescription").value = "";
    document.getElementById("productImage").value = "";
  }

  function editProduct(id, name, description, image) {
    document.getElementById("productId").value = id;
    document.getElementById("productName").value = name;
    document.getElementById("productDescription").value = description;
    document.getElementById("productImage").value = image;
    window.scrollTo(0, 0);
  }

  async function deleteProduct(id) {
    if (confirm("Delete this product?")) {
      await deleteDoc(doc(db, "products", id));
      loadProducts();
    }
  }

  loadProducts();
</script>

</body>
</html>

